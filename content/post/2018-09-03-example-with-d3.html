---
title: Example with D3
author: James Laird-Smith
date: '2018-09-03'
slug: example-with-d3
categories: []
tags: []
header:
  caption: ''
  image: ''
summary: "Example using D3."
draft: true
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/r2d3-render/r2d3-render.js"></script>
<script src="/rmarkdown-libs/webcomponents/webcomponents.js"></script>
<script src="/rmarkdown-libs/r2d3-binding/r2d3.js"></script>
<script src="/rmarkdown-libs/d3v5/d3.min.js"></script>


<pre class="d3"><code>// var totalWidth = document.getElementById(&quot;htmlwidget-1&quot;).offsetWidth

 var totalWidth = document.getElementsByTagName(&#39;body&#39;)[0].offsetWidth

// var width = totalWidth*1;

// var totalWidth = document.getElementsByClassName(&quot;r2d3 html-widget html-widget-static-bound&quot;)[0].offsetWidth

var width = Math.min(width, totalWidth);

// var chart = d3.select(&quot;&quot;).attr(&quot;id&quot;,&quot;chart&quot;)

// var totalWidth = document.getElementById(&quot;chart&quot;).offsetWidth

// var width = totalWidth*0.8;

svg.selectAll(&#39;rect&#39;)
  .data(data)
  .enter()
    .append(&#39;rect&#39;)
      .attr(&#39;width&#39;, function(d) { return d * 10; })
      .attr(&#39;height&#39;, &#39;20px&#39;)
      .attr(&#39;y&#39;, function(d, i) { return i * 22; })
      .attr(&#39;fill&#39;, &quot;blue&quot;);
      
var test = svg.append(&quot;g&quot;);

test.append(&#39;text&#39;)
  .text(width)
  .attr(&quot;y&quot;, height)
  .attr(&quot;x&quot;, width)
  .attr(&quot;text-anchor&quot;, &quot;end&quot;);</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"data":[4,8,15,16,23,42],"type":"numeric","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n\n// var totalWidth = document.getElementById(\"htmlwidget-1\").offsetWidth\n\n var totalWidth = document.getElementsByTagName('body')[0].offsetWidth\n\n// var width = totalWidth*1;\n\n// var totalWidth = document.getElementsByClassName(\"r2d3 html-widget html-widget-static-bound\")[0].offsetWidth\n\nvar width = Math.min(width, totalWidth);\n\n// var chart = d3.select(\"\").attr(\"id\",\"chart\")\n\n// var totalWidth = document.getElementById(\"chart\").offsetWidth\n\n// var width = totalWidth*0.8;\n\nsvg.selectAll('rect')\n  .data(data)\n  .enter()\n    .append('rect')\n      .attr('width', function(d) { return d * 10; })\n      .attr('height', '20px')\n      .attr('y', function(d, i) { return i * 22; })\n      .attr('fill', \"blue\");\n      \nvar test = svg.append(\"g\");\n\ntest.append('text')\n  .text(width)\n  .attr(\"y\", height)\n  .attr(\"x\", width)\n  .attr(\"text-anchor\", \"end\");\n};","style":null,"version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>r2d3(data=c(0.3, 0.6, 0.8, 0.95, 0.40, 0.20), script = &quot;extest.js&quot;)</code></pre>
<div id="htmlwidget-2" style="width:672px;height:480px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"data":[0.3,0.6,0.8,0.95,0.4,0.2],"type":"numeric","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  extest.js */\n// !preview r2d3 data=c(0.3, 0.6, 0.8, 0.95, 0.40, 0.20)\n//\n// r2d3: https://rstudio.github.io/r2d3\n//\n\nvar barHeight = Math.ceil(height / data.length);\n\nsvg.selectAll('rect')\n  .data(data)\n  .enter().append('rect')\n    .attr('width', function(d) { return d * width; })\n    .attr('height', barHeight)\n    .attr('y', function(d, i) { return i * barHeight; })\n    .attr('fill', 'steelblue');\n};","style":null,"version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
