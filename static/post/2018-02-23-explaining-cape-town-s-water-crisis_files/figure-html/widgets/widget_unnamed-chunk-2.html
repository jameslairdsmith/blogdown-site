<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<script src="r2d3_libs/htmlwidgets/htmlwidgets.js"></script>
<script src="r2d3_libs/r2d3-render/r2d3-render.js"></script>
<script src="r2d3_libs/webcomponents/webcomponents.js"></script>
<script src="r2d3_libs/r2d3-binding/r2d3.js"></script>
<script src="r2d3_libs/pymjs/pym.v1.min.js"></script>
<script src="r2d3_libs/d3v5/d3.min.js"></script>
  <title>r2d3</title>
</head>
<body style="background-color:white;">
<div id="htmlwidget_container">
  <div id="htmlwidget-9bd6afa66ced8ffbf320" style="width:100%;height:500px;" class="r2d3 html-widget"></div>
  <script>HTMLWidgets.pymChild = new pym.Child();HTMLWidgets.addPostRenderHandler(function(){
                                setTimeout(function(){HTMLWidgets.pymChild.sendHeight();},100);
                            });</script>
</div>
<script type="application/json" data-for="htmlwidget-9bd6afa66ced8ffbf320">{"x":{"data":{"year":[2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017],"station":[688160,688160,688160,688160,688160,688160,688160,688160,688160,688160,688160],"prcp":[24.94,21.62,22.64,14.23,14.7,15.61,26.79,20.09,12.64,8.64,5.98],"date":["2007-01-01","2008-01-01","2009-01-01","2010-01-01","2011-01-01","2012-01-01","2013-01-01","2014-01-01","2015-01-01","2016-01-01","2017-01-02"],"avrPrcp":[0.460187353629976,0.265807962529274,0.325526932084309,-0.166861826697892,-0.139344262295082,-0.0860655737704919,0.568501170960187,0.176229508196721,-0.259953161592506,-0.494145199063232,-0.649882903981265],"avrPrcpPct":[46.0187353629976,26.5807962529274,32.5526932084309,-16.6861826697892,-13.9344262295082,-8.60655737704919,56.8501170960187,17.6229508196721,-25.9953161592506,-49.4145199063232,-64.9882903981265]},"type":"data.frame","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  rainfallBars.js */\n\n//\n//\n\nvar totalWidth = document.getElementsByTagName('body')[0].offsetWidth;\n\nvar width = Math.min(width, totalWidth*0.8);\n\n// svg.attr(\"width\", width);   // This doesn't seem to work.\n\nvar margin = ({top: 20, right: 0, bottom: 30, left: 40});\n\nvar parseTime = d3.timeParse(\"%Y-%m-%d\");\n\nvar dataLength = function(d) {return d.length};\n\nvar barWidth = (width*0.8)/dataLength(data);\n\nvar customDateTicks = width * 0.015;\n\n\nvar x = d3.scaleTime()\n    .domain(d3.extent(data, d => parseTime(d.date)))\n    .range([margin.left, width - margin.right]);\n    \nvar y = d3.scaleLinear()\n    .domain([0, d3.max(data, d => d.prcp)]).nice()\n    .range([height - margin.bottom, margin.top]);\n    \n        \nvar xAxis = g => g\n  .attr(\"transform\", `translate(${barWidth/2},${height - margin.bottom + margin.bottom*0.2})`)\n  .call(d3.axisBottom(x).tickSizeOuter(0).tickSize(0).ticks(customDateTicks))\n  .call(g => g.select(\".domain\").remove());\n        \nvar yAxis = g => g\n    .attr(\"transform\", `translate(${margin.left - margin.left*0.2},0)`)\n    .call(d3.axisLeft(y))\n    .call(g => g.select(\".domain\").remove());\n\nsvg.append(\"g\")\n      .attr(\"fill\", \"steelblue\")\n    .selectAll(\"rect\").data(data).enter().append(\"rect\")\n      .attr(\"x\", d => x(parseTime(d.date)))\n      .attr(\"y\", d => y(d.prcp))\n      .attr(\"height\", d => y(0) - y(d.prcp))\n      .attr(\"width\", barWidth);\n  \nsvg.append(\"g\")\n      .call(xAxis);\n  \nsvg.append(\"g\")\n      .call(yAxis);\n\n\nvar test = svg.append(\"g\");\n\ntest.append('text')\n  .text(width)\n  .attr(\"y\", height)\n  .attr(\"x\", width)\n  .attr(\"text-anchor\", \"end\");\n};","style":null,"version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
<script type="application/htmlwidget-sizing" data-for="htmlwidget-9bd6afa66ced8ffbf320">{"viewer":{"width":"100%","height":350,"padding":0,"fill":false},"browser":{"width":"100%","height":500,"padding":0,"fill":false}}</script>
</body>
</html>
